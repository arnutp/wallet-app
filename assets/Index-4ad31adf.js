import{d as g,o as _,a as b,h as x,s as N,f,ba as B,bb as C,b as r,w as l,u as a,e as c}from"./index-41e4f233.js";import{u as R}from"./use-message-0e525969.js";import{z as n,x as u,A as L,w as v}from"./FormItem-af2fd84c.js";import{N as U}from"./Icon-c8a482d9.js";const q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 448 512"},A=x("path",{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z",fill:"currentColor"},null,-1),F=[A],I=g({name:"ArrowLeft",render:function(e,i){return _(),b("svg",q,F)}}),$={class:"register space-y-3"},E=x("h2",{class:"text-center text-2xl leading-9 tracking-tight"}," Register ",-1),H=g({__name:"Index",setup(h){const e=N(i());function i(){return{username:"",password:"",rePassword:"",displayname:""}}const y={username:{required:!0,trigger:"blur"},password:{required:!0,trigger:["input","blur"]},rePassword:{validator:()=>e.password===e.rePassword,required:!0,trigger:["input"]},displayname:{required:!0,trigger:["input"]}},d=f(),p=B(),k=C("auth"),o=f(!1),m=R();async function P(){try{if(await d.value?.validate(s=>{if(s)throw new Error("invalid form")}),o.value=!0,(await k.post("register",e)).status===200)p.push({name:"login"}),m.success("Register Success");else throw new Error("fail")}catch{m.error("Register Fail")}finally{o.value=!1}}return(w,s)=>(_(),b("div",$,[E,r(a(L),{ref_key:"formRef",ref:d,rules:y,model:e,class:"mt-4",disabled:o.value},{default:l(()=>[r(a(n),{label:"Username",path:"username"},{default:l(()=>[r(a(u),{value:e.username,"onUpdate:value":s[0]||(s[0]=t=>e.username=t)},null,8,["value"])]),_:1}),r(a(n),{label:"Password",path:"password"},{default:l(()=>[r(a(u),{value:e.password,"onUpdate:value":s[1]||(s[1]=t=>e.password=t),type:"password",showPasswordOn:"click"},null,8,["value"])]),_:1}),r(a(n),{label:"Confirm Password",path:"rePassword"},{default:l(()=>[r(a(u),{value:e.rePassword,"onUpdate:value":s[2]||(s[2]=t=>e.rePassword=t),disabled:!e.password,type:"password",showPasswordOn:"click"},null,8,["value","disabled"])]),_:1}),r(a(n),{label:"Displayname",path:"displayname"},{default:l(()=>[r(a(u),{value:e.displayname,"onUpdate:value":s[3]||(s[3]=t=>e.displayname=t)},null,8,["value"])]),_:1})]),_:1},8,["model","disabled"]),r(a(v),{loading:o.value,class:"w-full",onClick:s[4]||(s[4]=t=>P())},{default:l(()=>[c(" Submit ")]),_:1},8,["loading"]),r(a(v),{class:"w-full",onClick:s[5]||(s[5]=t=>a(p).push({name:"login"}))},{icon:l(()=>[r(a(U),null,{default:l(()=>[r(a(I))]),_:1})]),default:l(()=>[c(" Back ")]),_:1})]))}});export{H as default};
