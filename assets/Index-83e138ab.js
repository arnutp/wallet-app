import{d as h,ba as k,b4 as x,s as y,f as i,o as _,a as N,b as r,w as o,u as a,h as F,a$ as B,e as m}from"./index-dfe61df8.js";import{u as C}from"./use-message-375adf23.js";import{z as f,x as p,A as R,w}from"./FormItem-591fd066.js";const $={class:"login"},I=F("h2",{class:"mt-10 text-center text-2xl leading-9 tracking-tight"}," Sign in ",-1),A=h({__name:"Index",setup(L){const c=k(),v=x(),s=y({username:"",password:""}),u=i(),g={username:{required:!0},password:{required:!0}},l=i(!1),b=C();async function d(){try{await u.value?.validate(n=>{if(n)throw new Error("invalid form")}),l.value=!0,await v.login(s.username,s.password)}catch{b.error("Login Failed")}finally{l.value=!1}}return(n,e)=>(_(),N("div",$,[I,r(a(R),{ref_key:"formRef",ref:u,showLabel:!1,rules:g,model:s,showFeedback:!1,class:"mb-4 mt-8 space-y-6",size:"large",disabled:l.value},{default:o(()=>[r(a(f),{path:"username",class:"mb-3"},{default:o(()=>[r(a(p),{value:s.username,"onUpdate:value":e[0]||(e[0]=t=>s.username=t),placeholder:"username"},null,8,["value"])]),_:1}),r(a(f),{path:"password"},{default:o(()=>[r(a(p),{value:s.password,"onUpdate:value":e[1]||(e[1]=t=>s.password=t),placeholder:"password",type:"password",showPasswordOn:"click",onKeydown:e[2]||(e[2]=B(t=>d(),["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["model","disabled"]),r(a(w),{class:"w-full",loading:l.value,disabled:!(s.username&&s.password),onClick:e[3]||(e[3]=t=>d())},{default:o(()=>[m(" Log in ")]),_:1},8,["loading","disabled"]),r(a(w),{class:"mt-2 w-full",onClick:e[4]||(e[4]=t=>a(c).push({name:"register"}))},{default:o(()=>[m(" Register ")]),_:1})]))}});export{A as default};
